:root {
    --bg-color: #f0f2f5;
    --panel-bg: #ffffff;
    --text-color: #333;
    --accent: #4a90e2;
    --border: #ddd;
    --art-bg: #fff;
    --header-bg: #fff;
}
[data-theme="dark"] {
    --bg-color: #121212;
    --panel-bg: #1e1e1e;
    --text-color: #e0e0e0;
    --accent: #4a90e2;
    --border: #333;
    --art-bg: #000;
    --header-bg: #1e1e1e;
}
body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; height: 100vh; }

/* HEADER & NAV */
.main-header { background: var(--header-bg); border-bottom: 1px solid var(--border); padding: 15px; text-align: center; position: relative; }
.app-title { margin: 0; color: var(--accent); }
.welcome-msg { font-size: 0.8rem; color: #888; margin: 5px 0 10px 0; }
.navbar { display: block; width: 100%; }
.nav-links { list-style: none; padding: 0; margin: 0; display: flex; justify-content: center; gap: 20px; }
.nav-links a { text-decoration: none; color: var(--text-color); font-weight: 600; padding-bottom: 5px; border-bottom: 2px solid transparent; }
.nav-links a.active, .nav-links a:hover { color: var(--accent); border-bottom-color: var(--accent); }
.theme-switch-wrapper { position: absolute; top: 20px; right: 20px; }

/* DASHBOARD */
.dashboard-container { max-width: 1200px; margin: 40px auto; padding: 0 20px; text-align: center; }
.card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; }
.card {
    background: var(--panel-bg); padding: 30px 15px; border-radius: 12px; text-decoration: none; color: var(--text-color); border: 1px solid var(--border);
    transition: transform 0.2s, box-shadow 0.2s; display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 140px;
}
.card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); border-color: var(--accent); }
.card h3 { margin: 0; color: var(--accent); font-size: 1.2rem; }

/* GENERATOR LAYOUTS */
.content-wrapper { flex: 1; overflow: hidden; padding: 20px; }
.generator-layout { display: grid; grid-template-columns: 340px 1fr; gap: 20px; height: 100%; }
.controls-panel { background: var(--panel-bg); padding: 20px; border-radius: 8px; border: 1px solid var(--border); overflow-y: auto; }
.preview-panel { background: var(--art-bg); border: 1px solid var(--border); border-radius: 8px; display: flex; justify-content: center; align-items: flex-start; overflow: hidden; padding: 40px; position: relative; }

/* DRAG & DROP & PREVIEWS */
.drop-zone {
    width: 100%; padding: 10px; display: flex; align-items: center; justify-content: center;
    text-align: center; font-weight: 500; font-size: 0.9rem; color: #777;
    border: 2px dashed var(--accent); border-radius: 8px; background-color: var(--bg-color); 
    transition: 0.2s; position: relative; overflow: hidden; flex-wrap: wrap; gap: 5px; box-sizing: border-box;
}
/* Specific larger sizing for device source */
.drop-zone-large { height: 180px; } 

.drop-zone--over { border-style: solid; background-color: rgba(74, 144, 226, 0.1); }

/* Thumbnails within Dropzone */
.drop-zone__thumb {
    width: 100%; height: 100%; border-radius: 4px; overflow: hidden; background-color: transparent;
    background-size: contain; background-repeat: no-repeat; background-position: center;
}

/* URL Preview Box */
.url-preview-box {
    margin-top: 10px; width: 100%; height: 150px; background: var(--bg-color); border: 1px solid var(--border);
    display: flex; align-items: center; justify-content: center; border-radius: 4px; overflow: hidden;
}
.url-preview-box img { max-width: 100%; max-height: 100%; object-fit: contain; }

/* Batch Mini Previews */
.batch-mini-previews {
    display: flex; gap: 5px; flex-wrap: wrap; margin-top: 10px; padding: 5px; background: var(--bg-color); border-radius: 4px; min-height: 40px;
}
.mini-thumb { width: 40px; height: 40px; background-size: cover; border-radius: 3px; border: 1px solid var(--border); }

/* CONTROLS */
.source-toggle { display: flex; margin-bottom: 10px; border-bottom: 1px solid var(--border); }
.toggle-btn { flex: 1; background: transparent; border: none; padding: 10px; cursor: pointer; color: var(--text-color); border-bottom: 2px solid transparent; font-weight: 600; font-size: 0.85rem;}
.toggle-btn.active { color: var(--accent); border-bottom-color: var(--accent); }

input, select, textarea { width: 100%; padding: 8px; background: var(--bg-color); border: 1px solid var(--border); color: var(--text-color); border-radius: 4px; box-sizing: border-box; margin-bottom: 10px; }
.control-section { border-bottom: 1px solid var(--border); margin-bottom: 15px; padding-bottom: 15px; }
.btn-action { flex: 1; padding: 10px; background: var(--accent); color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
.btn-small { background: transparent; border: 1px solid var(--border); color: var(--text-color); cursor: pointer; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; }
.action-row { display: flex; gap: 10px; }
.checkbox-row-left { display: flex; align-items: center; gap: 8px; justify-content: flex-start; }
.checkbox-row-left input { width: auto; margin: 0; }
.checkbox-row-left label { margin: 0; cursor: pointer; }

/* OUTPUT */
.ascii-art { font-family: 'Courier New', monospace; white-space: pre; line-height: 1; font-size: 6px; background-color: var(--art-bg); transition: transform 0.1s; }
.placeholder-text { text-align: center; margin-top: 50px; color: #777; font-family: sans-serif; font-size: 1rem; }
.footer { text-align: center; padding: 10px; background: var(--header-bg); border-top: 1px solid var(--border); font-size: 0.8rem; }
#loading-indicator { position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 4px; display: none; z-index: 10; font-size:0.8rem;}

/* BATCH GRID */
.batch-layout-container { max-width: 1200px; margin: 0 auto; display: flex; flex-direction: column; height: 100%; }
.batch-controls { margin-bottom: 20px; }
.batch-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 15px; flex: 1; overflow-y: auto; padding-bottom: 20px; }
.batch-card { background: var(--art-bg); border: 1px solid var(--border); border-radius: 6px; overflow: hidden; height: 250px; display: flex; flex-direction: column; }
.batch-card-header { background: var(--panel-bg); padding: 5px 10px; font-size: 0.8rem; font-weight: bold; border-bottom: 1px solid var(--border); color: var(--text-color); display: flex; justify-content: space-between;}
.batch-card-body { flex: 1; position: relative; overflow: hidden; display: flex; justify-content: center; align-items: flex-start; padding: 10px; }
.batch-placeholder { grid-column: 1 / -1; text-align: center; padding: 50px; color: #888; border: 2px dashed var(--border); border-radius: 8px; }
.ascii-art-small { font-family: 'Courier New', monospace; white-space: pre; line-height: 1; font-size: 4px; transform-origin: top center; transition: transform 0.2s; }
.delete-x { color: red; cursor: pointer; font-weight: bold; }
.delete-x:hover { transform: scale(1.2); }